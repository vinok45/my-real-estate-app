"use strict";(self.webpackChunkreal_estate_app=self.webpackChunkreal_estate_app||[]).push([[519],{519:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});var a=r(43),s=r(216),o=r(579);const n=function(e){let{setProperties:t,setNotification:r}=e;const[n,p]=(0,a.useState)(""),[u,i]=(0,a.useState)(""),[l,c]=(0,a.useState)(null),[d,h]=(0,a.useState)(""),f=(0,s.Zp)();return(0,o.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!n||!u)return void h("Veuillez remplir tous les champs");const a=await(async()=>{if(!l)return null;const e=new FormData;e.append("file",l),e.append("upload_preset","YOUR_UPLOAD_PRESET");const t=await fetch("https://api.cloudinary.com/v1_1/YOUR_CLOUD_NAME/image/upload",{method:"POST",body:e});return(await t.json()).secure_url})();try{const e={title:n,price:parseInt(u),photo:a},s=await fetch("/properties",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),o=await s.json();s.ok?(t((e=>[...e,o])),r({message:"Propri\xe9t\xe9 ajout\xe9e avec succ\xe8s",type:"success"}),f("/")):h("Erreur lors de l'ajout de la propri\xe9t\xe9")}catch(d){h("Erreur lors de l'ajout de la propri\xe9t\xe9")}},children:[(0,o.jsx)("input",{type:"text",placeholder:"Titre",value:n,onChange:e=>p(e.target.value),required:!0}),(0,o.jsx)("input",{type:"number",placeholder:"Prix",value:u,onChange:e=>i(e.target.value),required:!0}),(0,o.jsx)("input",{type:"file",onChange:e=>c(e.target.files[0])}),d&&(0,o.jsx)("p",{style:{color:"red"},children:d}),(0,o.jsx)("button",{type:"submit",children:"Ajouter"})]})}}}]);
//# sourceMappingURL=519.16673bcc.chunk.js.map