{"version":3,"file":"static/js/93.6974ef34.chunk.js","mappings":"0KA6EA,QAzEA,SAAoBA,GAA8B,IAA7B,MAAEC,EAAK,gBAAEC,GAAiBF,EAC7C,MAAOG,EAAUC,IAAeC,EAAAA,EAAAA,UAAS,KAClCC,EAAUC,IAAeF,EAAAA,EAAAA,UAAS,KAClCG,EAAOC,IAAYJ,EAAAA,EAAAA,UAAS,KAC5BK,EAAeC,IAAoBN,EAAAA,EAAAA,WAAS,GAC7CO,GAAWC,EAAAA,EAAAA,MA6CjB,OA3CAC,EAAAA,EAAAA,YAAU,KACJb,GACFc,MAAM,WAAY,CAChBC,QAAS,CAAEC,cAAc,UAADC,OAAYjB,MAEnCkB,MAAKC,GAAYA,EAASC,SAC1BF,MAAKG,GAAQlB,EAAYkB,EAAKnB,YAC9BoB,OAAMC,GAAOtB,EAAgB,CAAEuB,QAAS,gDAA8CC,KAAM,WACjG,GACC,CAACzB,EAAOC,KAmCTyB,EAAAA,EAAAA,MAAA,QAAMC,SAjCaC,UAEnB,GADAC,EAAMC,iBACD5B,GAAaG,EAKlB,GAAKI,EAKL,IACE,MAAMU,QAAiBL,MAAM,WAAY,CACvCiB,OAAQ,MACRhB,QAAS,CAAE,eAAgB,mBAAoBC,cAAc,UAADC,OAAYjB,IACxEgC,KAAMC,KAAKC,UAAU,CAAEhC,WAAUG,qBAEhBc,EAASC,OACxBD,EAASgB,IACXlC,EAAgB,CAAEuB,QAAS,sCAAiCC,KAAM,YAClEd,EAAS,OAETH,EAAS,8CACTP,EAAgB,CAAEuB,QAAS,6CAA2CC,KAAM,UAEhF,CAAE,MAAOlB,GACPC,EAAS,8CACTP,EAAgB,CAAEuB,QAAS,6CAA2CC,KAAM,SAC9E,MArBEf,GAAiB,QALjBF,EAAS,mCA0BX,EAI6B4B,SAAA,EAC3BC,EAAAA,EAAAA,KAAA,SACEZ,KAAK,OACLa,YAAY,oBACZC,MAAOrC,EACPsC,SAAWC,GAAMtC,EAAYsC,EAAEC,OAAOH,OACtCI,UAAQ,KAEVN,EAAAA,EAAAA,KAAA,SACEZ,KAAK,WACLa,YAAY,eACZC,MAAOlC,EACPmC,SAAWC,GAAMnC,EAAYmC,EAAEC,OAAOH,OACtCI,UAAQ,IAETpC,IAAS8B,EAAAA,EAAAA,KAAA,KAAGO,MAAO,CAAEC,MAAO,OAAQT,SAAE7B,KACvC8B,EAAAA,EAAAA,KAAA,UAAQZ,KAAK,SAAQW,SAAE3B,EAAgB,YAAc,qBACpDA,IAAiB4B,EAAAA,EAAAA,KAAA,UAAQS,QAASA,IAAMpC,GAAiB,GAAO0B,SAAC,cAGxE,C","sources":["components/UserProfile.js"],"sourcesContent":["// src/components/UserProfile.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction UserProfile({ token, setNotification }) {\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [confirmUpdate, setConfirmUpdate] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    if (token) {\r\n      fetch('/profile', {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      })\r\n        .then(response => response.json())\r\n        .then(data => setUsername(data.username))\r\n        .catch(err => setNotification({ message: 'Erreur de chargement des données du profil', type: 'error' }));\r\n    }\r\n  }, [token, setNotification]);\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    if (!username || !password) {\r\n      setError('Veuillez remplir tous les champs');\r\n      return;\r\n    }\r\n\r\n    if (!confirmUpdate) {\r\n      setConfirmUpdate(true);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch('/profile', {\r\n        method: 'PUT',\r\n        headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${token}` },\r\n        body: JSON.stringify({ username, password })\r\n      });\r\n      const data = await response.json();\r\n      if (response.ok) {\r\n        setNotification({ message: 'Profil mis à jour avec succès', type: 'success' });\r\n        navigate('/');\r\n      } else {\r\n        setError('Erreur lors de la mise à jour du profil');\r\n        setNotification({ message: 'Erreur lors de la mise à jour du profil', type: 'error' });\r\n      }\r\n    } catch (error) {\r\n      setError('Erreur lors de la mise à jour du profil');\r\n      setNotification({ message: 'Erreur lors de la mise à jour du profil', type: 'error' });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Nom d'utilisateur\"\r\n        value={username}\r\n        onChange={(e) => setUsername(e.target.value)}\r\n        required\r\n      />\r\n      <input\r\n        type=\"password\"\r\n        placeholder=\"Mot de passe\"\r\n        value={password}\r\n        onChange={(e) => setPassword(e.target.value)}\r\n        required\r\n      />\r\n      {error && <p style={{ color: 'red' }}>{error}</p>}\r\n      <button type=\"submit\">{confirmUpdate ? 'Confirmer' : 'Mettre à jour'}</button>\r\n      {confirmUpdate && <button onClick={() => setConfirmUpdate(false)}>Annuler</button>}\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default UserProfile;\r\n"],"names":["_ref","token","setNotification","username","setUsername","useState","password","setPassword","error","setError","confirmUpdate","setConfirmUpdate","navigate","useNavigate","useEffect","fetch","headers","Authorization","concat","then","response","json","data","catch","err","message","type","_jsxs","onSubmit","async","event","preventDefault","method","body","JSON","stringify","ok","children","_jsx","placeholder","value","onChange","e","target","required","style","color","onClick"],"sourceRoot":""}