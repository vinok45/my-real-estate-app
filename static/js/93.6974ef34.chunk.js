"use strict";(self.webpackChunkreal_estate_app=self.webpackChunkreal_estate_app||[]).push([[93],{93:(e,r,t)=>{t.r(r),t.d(r,{default:()=>u});var s=t(43),a=t(216),o=t(579);const u=function(e){let{token:r,setNotification:t}=e;const[u,l]=(0,s.useState)(""),[n,i]=(0,s.useState)(""),[c,p]=(0,s.useState)(""),[d,h]=(0,s.useState)(!1),f=(0,a.Zp)();return(0,s.useEffect)((()=>{r&&fetch("/profile",{headers:{Authorization:"Bearer ".concat(r)}}).then((e=>e.json())).then((e=>l(e.username))).catch((e=>t({message:"Erreur de chargement des donn\xe9es du profil",type:"error"})))}),[r,t]),(0,o.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),u&&n)if(d)try{const e=await fetch("/profile",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({username:u,password:n})});await e.json();e.ok?(t({message:"Profil mis \xe0 jour avec succ\xe8s",type:"success"}),f("/")):(p("Erreur lors de la mise \xe0 jour du profil"),t({message:"Erreur lors de la mise \xe0 jour du profil",type:"error"}))}catch(c){p("Erreur lors de la mise \xe0 jour du profil"),t({message:"Erreur lors de la mise \xe0 jour du profil",type:"error"})}else h(!0);else p("Veuillez remplir tous les champs")},children:[(0,o.jsx)("input",{type:"text",placeholder:"Nom d'utilisateur",value:u,onChange:e=>l(e.target.value),required:!0}),(0,o.jsx)("input",{type:"password",placeholder:"Mot de passe",value:n,onChange:e=>i(e.target.value),required:!0}),c&&(0,o.jsx)("p",{style:{color:"red"},children:c}),(0,o.jsx)("button",{type:"submit",children:d?"Confirmer":"Mettre \xe0 jour"}),d&&(0,o.jsx)("button",{onClick:()=>h(!1),children:"Annuler"})]})}}}]);
//# sourceMappingURL=93.6974ef34.chunk.js.map