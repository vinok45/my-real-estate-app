{"version":3,"file":"static/js/519.16673bcc.chunk.js","mappings":"4KAiFA,QA7EA,SAAoBA,GAAsC,IAArC,cAAEC,EAAa,gBAAEC,GAAiBF,EACrD,MAAOG,EAAOC,IAAYC,EAAAA,EAAAA,UAAS,KAC5BC,EAAOC,IAAYF,EAAAA,EAAAA,UAAS,KAC5BG,EAAOC,IAAYJ,EAAAA,EAAAA,UAAS,OAC5BK,EAAOC,IAAYN,EAAAA,EAAAA,UAAS,IAC7BO,GAAWC,EAAAA,EAAAA,MA8CjB,OACEC,EAAAA,EAAAA,MAAA,QAAMC,SA9BaC,UAEnB,GADAC,EAAMC,kBACDf,IAAUG,EAEb,YADAK,EAAS,oCAIX,MAAMQ,OAtBkBH,WACxB,IAAKR,EAAO,OAAO,KACnB,MAAMY,EAAW,IAAIC,SACrBD,EAASE,OAAO,OAAQd,GACxBY,EAASE,OAAO,gBAAiB,sBAEjC,MAAMC,QAAiBC,MAAM,+DAAgE,CAC3FC,OAAQ,OACRC,KAAMN,IAIR,aADmBG,EAASI,QAChBC,UAAU,EAUCC,GAEvB,IACE,MAAMC,EAAc,CAAE3B,QAAOG,MAAOyB,SAASzB,GAAQE,MAAOW,GACtDI,QAAiBC,MAAM,cAAe,CAC1CC,OAAQ,OACRO,QAAS,CAAE,eAAgB,oBAC3BN,KAAMO,KAAKC,UAAUJ,KAEjBK,QAAaZ,EAASI,OACxBJ,EAASa,IACXnC,GAAcoC,GAAkB,IAAIA,EAAgBF,KACpDjC,EAAgB,CAAEoC,QAAS,4CAAiCC,KAAM,YAClE3B,EAAS,MAETD,EAAS,+CAEb,CAAE,MAAOD,GACPC,EAAS,+CACX,GAI6B6B,SAAA,EAC3BC,EAAAA,EAAAA,KAAA,SACEF,KAAK,OACLG,YAAY,QACZC,MAAOxC,EACPyC,SAAWC,GAAMzC,EAASyC,EAAEC,OAAOH,OACnCI,UAAQ,KAEVN,EAAAA,EAAAA,KAAA,SACEF,KAAK,SACLG,YAAY,OACZC,MAAOrC,EACPsC,SAAWC,GAAMtC,EAASsC,EAAEC,OAAOH,OACnCI,UAAQ,KAEVN,EAAAA,EAAAA,KAAA,SACEF,KAAK,OACLK,SAAWC,GAAMpC,EAASoC,EAAEC,OAAOE,MAAM,MAE1CtC,IAAS+B,EAAAA,EAAAA,KAAA,KAAGQ,MAAO,CAAEC,MAAO,OAAQV,SAAE9B,KACvC+B,EAAAA,EAAAA,KAAA,UAAQF,KAAK,SAAQC,SAAC,cAG5B,C","sources":["components/AddProperty.js"],"sourcesContent":["// src/components/AddProperty.js\r\nimport React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction AddProperty({ setProperties, setNotification }) {\r\n  const [title, setTitle] = useState('');\r\n  const [price, setPrice] = useState('');\r\n  const [photo, setPhoto] = useState(null);\r\n  const [error, setError] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  const handlePhotoUpload = async () => {\r\n    if (!photo) return null;\r\n    const formData = new FormData();\r\n    formData.append('file', photo);\r\n    formData.append('upload_preset', 'YOUR_UPLOAD_PRESET'); // Remplacez par votre upload preset\r\n\r\n    const response = await fetch(`https://api.cloudinary.com/v1_1/YOUR_CLOUD_NAME/image/upload`, {\r\n      method: 'POST',\r\n      body: formData\r\n    });\r\n\r\n    const data = await response.json();\r\n    return data.secure_url;\r\n  };\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    if (!title || !price) {\r\n      setError('Veuillez remplir tous les champs');\r\n      return;\r\n    }\r\n\r\n    const photoUrl = await handlePhotoUpload();\r\n\r\n    try {\r\n      const newProperty = { title, price: parseInt(price), photo: photoUrl };\r\n      const response = await fetch('/properties', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(newProperty)\r\n      });\r\n      const data = await response.json();\r\n      if (response.ok) {\r\n        setProperties(prevProperties => [...prevProperties, data]);\r\n        setNotification({ message: 'Propriété ajoutée avec succès', type: 'success' });\r\n        navigate('/');\r\n      } else {\r\n        setError('Erreur lors de l\\'ajout de la propriété');\r\n      }\r\n    } catch (error) {\r\n      setError('Erreur lors de l\\'ajout de la propriété');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Titre\"\r\n        value={title}\r\n        onChange={(e) => setTitle(e.target.value)}\r\n        required\r\n      />\r\n      <input\r\n        type=\"number\"\r\n        placeholder=\"Prix\"\r\n        value={price}\r\n        onChange={(e) => setPrice(e.target.value)}\r\n        required\r\n      />\r\n      <input\r\n        type=\"file\"\r\n        onChange={(e) => setPhoto(e.target.files[0])}\r\n      />\r\n      {error && <p style={{ color: 'red' }}>{error}</p>}\r\n      <button type=\"submit\">Ajouter</button>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default AddProperty;\r\n"],"names":["_ref","setProperties","setNotification","title","setTitle","useState","price","setPrice","photo","setPhoto","error","setError","navigate","useNavigate","_jsxs","onSubmit","async","event","preventDefault","photoUrl","formData","FormData","append","response","fetch","method","body","json","secure_url","handlePhotoUpload","newProperty","parseInt","headers","JSON","stringify","data","ok","prevProperties","message","type","children","_jsx","placeholder","value","onChange","e","target","required","files","style","color"],"sourceRoot":""}