"use strict";(self.webpackChunkreal_estate_app=self.webpackChunkreal_estate_app||[]).push([[484],{484:(e,t,r)=>{r.r(t),r.d(t,{default:()=>o});var a=r(43),s=r(216),n=r(579);const o=function(e){let{properties:t,setProperties:r,setNotification:o}=e;const{id:i}=(0,s.g)(),p=t.find((e=>e.id===parseInt(i))),[u,c]=(0,a.useState)(p?p.title:""),[l,d]=(0,a.useState)(p?p.price:""),[h,f]=(0,a.useState)(null),[m,y]=(0,a.useState)(""),j=(0,s.Zp)();return(0,a.useEffect)((()=>{p||fetch("/properties/".concat(i)).then((e=>e.json())).then((e=>{c(e.title),d(e.price)})).catch((e=>o({message:"Erreur de chargement des donn\xe9es",type:"error"})))}),[i,p,o]),(0,n.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!u||!l)return void y("Veuillez remplir tous les champs");const t=await(async()=>{if(!h)return null;const e=new FormData;e.append("file",h),e.append("upload_preset","YOUR_UPLOAD_PRESET");const t=await fetch("https://api.cloudinary.com/v1_1/YOUR_CLOUD_NAME/image/upload",{method:"POST",body:e});return(await t.json()).secure_url})(),a={title:u,price:parseInt(l),photo:t||p.photo};try{const e=await fetch("/properties/".concat(i),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),t=await e.json();e.ok?(r((e=>e.map((e=>e.id===parseInt(i)?t:e)))),o({message:"Propri\xe9t\xe9 mise \xe0 jour avec succ\xe8s",type:"success"}),j("/")):y("Erreur lors de la mise \xe0 jour de la propri\xe9t\xe9")}catch(m){y("Erreur lors de la mise \xe0 jour de la propri\xe9t\xe9")}},children:[(0,n.jsx)("input",{type:"text",placeholder:"Titre",value:u,onChange:e=>c(e.target.value),required:!0}),(0,n.jsx)("input",{type:"number",placeholder:"Prix",value:l,onChange:e=>d(e.target.value),required:!0}),(0,n.jsx)("input",{type:"file",onChange:e=>f(e.target.files[0])}),m&&(0,n.jsx)("p",{style:{color:"red"},children:m}),(0,n.jsx)("button",{type:"submit",children:"Mettre \xe0 jour"})]})}}}]);
//# sourceMappingURL=484.697d72ec.chunk.js.map